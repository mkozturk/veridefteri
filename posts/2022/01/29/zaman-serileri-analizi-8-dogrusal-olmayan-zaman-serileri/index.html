<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.450">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Murat Öztürkmen">
<meta name="dcterms.date" content="2022-01-29">

<title>Veri Defteri - Zaman Serileri Analizi 8: Doğrusal Olmayan Zaman Serileri</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="../../../../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../../../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../../../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../../../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../../../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../../../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../../../../">
<link href="../../../../../img/veridefteri_ikon.png" rel="icon" type="image/png">
<script src="../../../../../site_libs/quarto-html/quarto.js"></script>
<script src="../../../../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../../../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../../../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../../../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../../../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../../../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../../../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../../../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>

  <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<link rel="stylesheet" href="../../../../../styles.css">
</head>

<body class="nav-fixed fullcontent">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a class="navbar-brand" href="../../../../../index.html">
    <span class="navbar-title">Veri Defteri</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../../../../about.html" rel="" target="">
 <span class="menu-text">Hakkımızda</span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://twitter.com/veridefteri" rel="" target=""><i class="bi bi-twitter" role="img">
</i> 
 <span class="menu-text"></span></a>
  </li>  
</ul>
            <div class="quarto-navbar-tools">
</div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Zaman Serileri Analizi 8: Doğrusal Olmayan Zaman Serileri</h1>
  <div class="quarto-categories">
    <div class="quarto-category">Zaman serileri</div>
  </div>
  </div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Murat Öztürkmen </p>
          </div>
  </div>
    
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">January 29, 2022</p>
    </div>
  </div>
  
    
  </div>
  

</header>

<section id="giriş" class="level1">
<h1>1. Giriş</h1>
<p>Önceki yazılarda tartıştığımız zaman serisi modellerinin çoğu doğrusal zaman serisi modelleridir. Akademik ve uygulamalı araştırmaların ön saflarında yer almalarına rağmen, basit doğrusal zaman serisi modellerinin genellikle iktisadi ve finansal verilerin belirli yönlerini açıklanmadan bıraktığı bulunmuştur. İktisadi ve finansal sistemlerin hem yapısal hem de davranışsal değişikliklerden geçtiği bilindiğinden, ampirik verileri farklı zamanlarda açıklamak için farklı zaman serisi modellerinin gerekli olabileceğini varsaymak mantıklıdır. Bu yazıda, iktisadi ve finansal zaman serisi verilerinde doğrusal olmayan davranışı modellemede etkili olduğu tespit edilen bazı popüler doğrusal olmayan zaman serisi modelleri üzerinde duracağız.</p>
<p>Uygulamalar için, BIST-100 endeksi getirileri üzerine çalışacağız. Endeks verilerine <code>investpy</code> çerçevesi ile erişeceğiz:</p>
<div class="cell" data-execution_count="1">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> warnings</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a>warnings.filterwarnings(<span class="st">"ignore"</span>)</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np</span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> matplotlib.pyplot <span class="im">as</span> plt</span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> yfinance <span class="im">as</span> yf</span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> investpy <span class="im">as</span> inv</span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> datetime</span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a>bist100 <span class="op">=</span> yf.Ticker(<span class="st">'XU100.IS'</span>)</span>
<span id="cb1-12"><a href="#cb1-12" aria-hidden="true" tabindex="-1"></a>bist100_verisi <span class="op">=</span> bist100.history(start<span class="op">=</span><span class="st">"2005-01-01"</span>, end<span class="op">=</span><span class="st">"2021-06-01"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Kapanış fiyatlarını düzenleyelim:</p>
<div class="cell" data-execution_count="2">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> adjust(row):</span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> row.name <span class="op">&lt;</span> pd.to_datetime(<span class="st">"2020-07-26"</span>):</span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> row[<span class="st">'Close'</span>] <span class="op">/</span> <span class="dv">100</span></span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a>    <span class="cf">else</span>:</span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> row[<span class="st">'Close'</span>]</span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true" tabindex="-1"></a>bist100_verisi[<span class="st">'Close'</span>] <span class="op">=</span> bist100_verisi.<span class="bu">apply</span>(adjust, axis<span class="op">=</span><span class="dv">1</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Şimdi de kapanış fiyatlarının grafiğini çizelim:</p>
<div class="cell" data-execution_count="3">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a>bist100_verisi.Close.plot(figsize<span class="op">=</span>(<span class="dv">12</span>,<span class="dv">8</span>))</span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>plt.grid()</span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a>plt.title(<span class="st">"BİST 100 Kapanış Fiyatları"</span>)<span class="op">;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<p><img src="index_files/figure-html/cell-4-output-1.png" class="img-fluid"></p>
</div>
</div>
<p>Kapanış fiyatlarından günlük ve aylık getirileri hesaplayıp ayrı bir çerçeve oluşturalım:</p>
<div class="cell" data-execution_count="4">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>bist_günlük_getiriler <span class="op">=</span> pd.DataFrame()</span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>bist_günlük_getiriler[<span class="st">'getiriler'</span>] <span class="op">=</span> bist100_verisi[<span class="st">'Close'</span>].pct_change().dropna()</span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a>bist_aylık_getiriler <span class="op">=</span> pd.DataFrame()</span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a>bist_aylık_getiriler[<span class="st">'getiriler'</span>] <span class="op">=</span> bist100_verisi[<span class="st">'Close'</span>].resample(<span class="st">'M'</span>).ffill().pct_change().dropna()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Günlük getirilerin grafiğini de çizelim:</p>
<div class="cell" data-execution_count="5">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a>bist_günlük_getiriler.getiriler.plot(figsize<span class="op">=</span>(<span class="dv">12</span>,<span class="dv">8</span>))</span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>plt.grid()</span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a>plt.title(<span class="st">"BİST 100 Günlük Getiriler"</span>)<span class="op">;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<p><img src="index_files/figure-html/cell-6-output-1.png" class="img-fluid"></p>
</div>
</div>
<p>Aylık getirilerin grafiğini de çizelim:</p>
<div class="cell" data-execution_count="6">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a>bist_aylık_getiriler.getiriler.plot(figsize<span class="op">=</span>(<span class="dv">12</span>,<span class="dv">8</span>))</span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>plt.grid()</span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a>plt.title(<span class="st">"BİST 100 Aylık Getiriler"</span>)<span class="op">;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<p><img src="index_files/figure-html/cell-7-output-1.png" class="img-fluid"></p>
</div>
</div>
</section>
<section id="ortalamada-doğrusal-olmayan-modeller" class="level1">
<h1>2. Ortalamada Doğrusal Olmayan Modeller</h1>
<p>Stokastik zaman serileri doğrusal fonksiyonda aşağıdaki şekilde gösterilebilir:</p>
<p><span class="math display">\[
\mathrm{X}_{\mathrm{t}}=\mu+\sum_{i=0}^{\infty} \varphi_{i} \alpha_{\mathrm{t}-\mathrm{i}}
\]</span></p>
<p>Burada, <span class="math inline">\(\mu\)</span> sabit terim, <span class="math inline">\(\varphi_{0} = 1\)</span> reel sayıları, <span class="math inline">\(\alpha_{\mathrm{t}}\)</span> ise bağımsız ve türdeş dağılımlı (iid) rassal değişkeni gösterir. Model fonksiyonel formda aşağıdaki şekilde gösterilebilir:</p>
<p><span class="math display">\[
X_{t}=f\left(a_{t}, a_{t-1}, \ldots\right)
\]</span></p>
<p><span class="math inline">\(f(.)\)</span>’nin fonksiyonel durumuna göre model doğrusal ya da doğrusal olmayan model olarak niteliklendirilebilmektedir. <span class="math inline">\(f_{t-1}\)</span>, <span class="math inline">\(\left(X_{t-1}, X_{t-2}, \ldots\right)\)</span> ve <span class="math inline">\(\left(\alpha_{t-1}, \alpha_{t-2}, \ldots\right)\)</span> ’nin kombinsayonlarının toplamı olarak ifade edildiğinde <span class="math inline">\(X_{t}\)</span>’nin koşullu ortalama ve varyansı aşağıdaki gibi gösterilebilir.</p>
<p><span class="math display">\[
\begin{aligned}
&amp;\mu_{t}=E\left(X_{t} / F_{t-1}\right) \equiv g\left(F_{t-1}\right) \\
&amp;\sigma^{2} t=\operatorname{Var}\left(X_{t} / F_{t-1}\right) \equiv h\left(F_{t-1}\right)
\end{aligned}
\]</span></p>
<p>Bu noktadan hareketle model; <span class="math inline">\(\left.\mathrm{X_{t}}=\mathrm{g}\left(\mathrm{F}_{\mathrm{t}-1}\right)+\sqrt{h\left(F_{t-1}\right)\varepsilon_{\mathrm{t}}}\right)\)</span> eğer doğrusal olmama <span class="math inline">\(\mathrm{g}(.)\)</span> ’den kaynaklanıyorsa <strong>ortalamada doğrusal olmayan model</strong>, eğer <span class="math inline">\(\mathrm{h}(.)\)</span> kaynaklanıyorsa <strong>varyansta doğrusal olmayan model</strong> olarak adlandirılır.</p>
<p>İktisadi ve finansal zaman serilerinde doğrusal olmayan davranışı modellemek için, dünyanın farklı durumlarının veya rejimlerinin varlığına izin vermek ve dinamiklerin farklı rejimlerde farklı olmasına izin vermek doğal görünmektedir.</p>
<section id="kendinden-uyarımlı-eşik-değerli-özbağlanım-modeli-self-exciting-threshold-autoregressive-model" class="level2">
<h2 class="anchored" data-anchor-id="kendinden-uyarımlı-eşik-değerli-özbağlanım-modeli-self-exciting-threshold-autoregressive-model">2.1. Kendinden Uyarımlı Eşik Değerli Özbağlanım Modeli (Self-Exciting Threshold Autoregressive Model)</h2>
<p>Doğrusal olmayan birçok durumu temsil edebilmesinden dolayı <strong>eşik özbağlanım (threshold autoregressive - TAR)</strong> modelleri, doğrusal olmayan biçimdeki modellerin en yaygın kullanılanıdır dşyebiliriz. TAR modelleri belli bir eşik değer belirleyerek, değişik rejimlerin finansal serilere uygulanmasını olanaklı kılmaktadır. Böylece her bir rejim kendi içinde doğrusal kalırken, serinin bütünü doğrusal olmayan özellikler sergileyebilmektedir. Aşağıda iki rejimli bir TAR modeli AR(1) parametreleri ile gösterilmiştir:</p>
<p><span class="math display">\[
y_{t}=\left\{\begin{array}{l}
\phi_{0,1}+\phi_{1,1} y_{t-1}+\varepsilon_{t} \text { eğer } y_{t} \leq c_{1} \\
\phi_{0,2}+\phi_{1,2} y_{t-1}+\varepsilon_{t} \text { eğer } y_{t}&gt;c_{t}
\end{array}\right\}
\]</span></p>
<p><strong>Kendinden uyarımlı eşik değerli özbağlanım modelleri (self-exciting threshold autoregressive-SETAR)</strong> ilk defa Tong ve Lim (1980) tarafından geliştirilmiştir. Aşağıda iki rejimli bir SETAR (1,1) modeli gösterilmiştir:</p>
<p><span class="math display">\[
y_{t}=\left\{\begin{array}{l}
\phi_{1,0}+\phi_{1,1} y_{t-1}+\sigma_{1} \varepsilon_{t} \text { eğer } y_{t-1} \leq r \\
\phi_{2,0}+\phi_{2,1} y_{t-1}+\sigma_{2} \varepsilon_{t} \text { eğer } y_{t-1}&gt;r
\end{array}\right\}
\]</span></p>
<p>Geçiș değişkeni olarak adlandırılan <span class="math inline">\(y_{t-1}\)</span> bağımsız değişken <span class="math inline">\(y_{t}\)</span> ’ nin 1 gecikmeli değeridir. İki doğrusal rejim arasındaki geçiş, bağımlı değişkenin 1 gecikmeli değerine bağlı olarak belirlenecektir. Eğer süreç eşik değerin altında seyrediyorsa düşük rejim, tersi durumda da yüksek rejim geçerlidir. Buna ek olarak her iki rejimin varyanslarının eşit olması beklenmemektedir.</p>
</section>
<section id="markov-geçiş-modelleri-markow-switcing-models" class="level2">
<h2 class="anchored" data-anchor-id="markov-geçiş-modelleri-markow-switcing-models">2.2. Markov Geçiş Modelleri (Markow-Switcing Models)</h2>
<p>Markov-geçiş modelleri sosyal bilimlerde yaygın olarak uygulanmaktadır. Markov-geçişli bağlanım modeli ilk olarak Quandt (1972) ve Goldfeld ve Quandt (1973) tarafından geliştirilmiştir. Yeni ufuklar açan bir makalede Hamilton (1989), AR süreçleri için Markov-geçişli bağlanımları genişletti ve öngörüler için doğrusal olmayan bir filtre sağladı. Hamilton (1993) ve Hamilton (1994, bölüm 22), Markov-geçişli bağlanım modellerine giriş için güzel bir başlangıç noktasıdır.</p>
<p>Markov-geçiş modelleri, sonlu bir gözlemlenmemiş durum (state) kümesi üzerinden geçiş yaptığına inanılan seriler için kullanılır ve sürecin her durumda farklı şekilde gelişmesine izin verir. Geçişler bir Markov sürecine göre gerçekleşir. Bir durumdan diğerine geçiş zamanı ve durum değişiklikleri arasındaki süre rassaldır. Örneğin, bu modeller, ekonomik büyümenin genişleme ve durgunluk arasında geçiş yaptığı zamanı ve her bir dönemin süresini yöneten süreci anlamak için kullanılabilir.</p>
<p>Aşağıdaki modellerde olduğu gibi, <span class="math inline">\(t=1,2, \ldots, T\)</span>’nin iki durumla karakterize edildiği bir <span class="math inline">\(y_{t}\)</span> serisinin evrimini düşünelim:</p>
<ul>
<li>Durum 1: <span class="math inline">\(y_{t}=\mu_{1}+\varepsilon_{t}\)</span></li>
<li>Durum 2: <span class="math inline">\(y_{t}=\mu_{2}+\varepsilon_{t}\)</span></li>
</ul>
<p>burada <span class="math inline">\(\mu_{1}\)</span> ve <span class="math inline">\(\mu_{2}\)</span> sırasıyla durum 1 ve durum 2’deki sabit terimlerdir. <span class="math inline">\(\varepsilon_{t}\)</span>, varyansı <span class="math inline">\(\sigma^{2}\)</span> olan bir beyaz gürültü hatasıdır. İki durum modeli, sabit terimde değişir. Anahtarların zamanlaması biliniyorsa, yukarıdaki model şu şekilde ifade edilebilir:</p>
<p><span class="math display">\[
y_{t}=s_{t} \mu_{1}+\left(1-s_{t}\right) \mu_{2}+\varepsilon_{t}
\]</span></p>
<p>burada <span class="math inline">\(s_{t}\)</span>, süreç 1 durumundaysa 1’dir ve aksi takdirde 0’dır.</p>
<p><strong><em>Örnek: BİST 100 günlük getirileri için MS Modeli</em></strong></p>
<p>Bu model, rejim değişen varyanslılığı (varyansların değiştirilmesi) ve ortalama etkisi olmayan bir öngörü modelini gösterir. Model, Kim, Nelson, and Startz (1998) üç durumlu varyans geçiş modellerine dayanır. Model, formel olarak aşağıdaki gibi gösterilebilir:</p>
<p><span class="math display">\[
\begin{aligned}
&amp;y_{t}=\varepsilon_{t} \\
&amp;\varepsilon_{t} \sim N\left(0, \sigma_{S_{t}}^{2}\right)
\end{aligned}
\]</span></p>
<div class="cell" data-execution_count="7">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> statsmodels.api <span class="im">as</span> sm</span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a><span class="co"># modelin oluşturulması</span></span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a>bist_ms_model <span class="op">=</span> sm.tsa.MarkovRegression(</span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a>    bist_günlük_getiriler, </span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a>    k_regimes<span class="op">=</span><span class="dv">3</span>, </span>
<span id="cb7-7"><a href="#cb7-7" aria-hidden="true" tabindex="-1"></a>    trend<span class="op">=</span><span class="st">"n"</span>, </span>
<span id="cb7-8"><a href="#cb7-8" aria-hidden="true" tabindex="-1"></a>    switching_variance<span class="op">=</span><span class="va">True</span></span>
<span id="cb7-9"><a href="#cb7-9" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>C:\Users\GTUSR0319\Anaconda3\lib\site-packages\statsmodels\tsa\base\tsa_model.py:581: ValueWarning: A date index has been provided, but it has no associated frequency information and so will be ignored when e.g. forecasting.
  warnings.warn('A date index has been provided, but it has no'</code></pre>
</div>
</div>
<div class="cell" data-execution_count="8">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a>bist_ms_sonuç <span class="op">=</span> bist_ms_model.fit()</span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(bist_ms_sonuç.summary())</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>C:\Users\GTUSR0319\Anaconda3\lib\site-packages\statsmodels\base\model.py:566: ConvergenceWarning: Maximum Likelihood optimization failed to converge. Check mle_retvals
  warnings.warn("Maximum Likelihood optimization failed to "</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>                        Markov Switching Model Results                        
==============================================================================
Dep. Variable:              getiriler   No. Observations:                 4116
Model:               MarkovRegression   Log Likelihood               11495.575
Date:                Sat, 29 Jan 2022   AIC                         -22973.150
Time:                        10:20:02   BIC                         -22916.246
Sample:                             0   HQIC                        -22953.008
                               - 4116                                         
Covariance Type:               approx                                         
                             Regime 0 parameters                              
==============================================================================
                 coef    std err          z      P&gt;|z|      [0.025      0.975]
------------------------------------------------------------------------------
sigma2      9.359e-05      8e-06     11.703      0.000    7.79e-05       0.000
                             Regime 1 parameters                              
==============================================================================
                 coef    std err          z      P&gt;|z|      [0.025      0.975]
------------------------------------------------------------------------------
sigma2         0.0002    1.7e-05     12.444      0.000       0.000       0.000
                             Regime 2 parameters                              
==============================================================================
                 coef    std err          z      P&gt;|z|      [0.025      0.975]
------------------------------------------------------------------------------
sigma2         0.0009   7.75e-05     11.595      0.000       0.001       0.001
                         Regime transition parameters                         
==============================================================================
                 coef    std err          z      P&gt;|z|      [0.025      0.975]
------------------------------------------------------------------------------
p[0-&gt;0]        0.9659   3.17e-05   3.05e+04      0.000       0.966       0.966
p[1-&gt;0]        0.0186      0.007      2.614      0.009       0.005       0.033
p[2-&gt;0]     8.535e-05      0.021      0.004      0.997      -0.041       0.041
p[0-&gt;1]        0.0341   1.02e-05   3350.793      0.000       0.034       0.034
p[1-&gt;1]        0.9642      0.008    118.017      0.000       0.948       0.980
p[2-&gt;1]        0.0747      0.021      3.560      0.000       0.034       0.116
==============================================================================

Warnings:
[1] Covariance matrix calculated using numerical (complex-step) differentiation.</code></pre>
</div>
</div>
<p>Rejimlerin her birinde bulunma olasılıklarını çizelim:</p>
<div class="cell" data-execution_count="9">
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a>fig, axes <span class="op">=</span> plt.subplots(<span class="dv">3</span>, figsize<span class="op">=</span>(<span class="dv">12</span>, <span class="dv">8</span>))</span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a>ax <span class="op">=</span> axes[<span class="dv">0</span>]</span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a>ax.plot(bist_ms_sonuç.smoothed_marginal_probabilities[<span class="dv">0</span>])</span>
<span id="cb12-5"><a href="#cb12-5" aria-hidden="true" tabindex="-1"></a>ax.<span class="bu">set</span>(title<span class="op">=</span><span class="st">"Getiriler için düşük varyans rejiminin yumuşatılmış olasılığı"</span>)</span>
<span id="cb12-6"><a href="#cb12-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-7"><a href="#cb12-7" aria-hidden="true" tabindex="-1"></a>ax <span class="op">=</span> axes[<span class="dv">1</span>]</span>
<span id="cb12-8"><a href="#cb12-8" aria-hidden="true" tabindex="-1"></a>ax.plot(bist_ms_sonuç.smoothed_marginal_probabilities[<span class="dv">1</span>])</span>
<span id="cb12-9"><a href="#cb12-9" aria-hidden="true" tabindex="-1"></a>ax.<span class="bu">set</span>(title<span class="op">=</span><span class="st">"Getiriler için orta düzey varyans rejiminin yumuşatılmış olasılığı"</span>)</span>
<span id="cb12-10"><a href="#cb12-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-11"><a href="#cb12-11" aria-hidden="true" tabindex="-1"></a>ax <span class="op">=</span> axes[<span class="dv">2</span>]</span>
<span id="cb12-12"><a href="#cb12-12" aria-hidden="true" tabindex="-1"></a>ax.plot(bist_ms_sonuç.smoothed_marginal_probabilities[<span class="dv">2</span>])</span>
<span id="cb12-13"><a href="#cb12-13" aria-hidden="true" tabindex="-1"></a>ax.<span class="bu">set</span>(title<span class="op">=</span><span class="st">"Getiriler için yüksek varyans rejiminin yumuşatılmış olasılığı"</span>)</span>
<span id="cb12-14"><a href="#cb12-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-15"><a href="#cb12-15" aria-hidden="true" tabindex="-1"></a>fig.tight_layout()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<p><img src="index_files/figure-html/cell-10-output-1.png" class="img-fluid"></p>
</div>
</div>
</section>
</section>
<section id="varyansta-doğrusal-olmayan-modeller" class="level1">
<h1>3. Varyansta Doğrusal Olmayan Modeller</h1>
<p>Hata terimlerinin diğer hata terimleri ile aralarında ilişki olması otokorelasyon olarak tanımlanır. Otokorelasyon genellikle zaman serilerinde karşılaşılan bir sorundur. Değişen varyans (heteroscedasticity) ise, anakütle hata terimi varyansının gözlemler itibariyle sabit olmamasıdır ve bir kesit verisi problemidir.</p>
<p>Engle(1982,1983) ve Cragg(1982) analizlerinde makro ekonomik verilerin zaman serisi modellerinde değişen varyans sorunu ile karşılaşıldığını ifade etmişlerdir.</p>
<p><span class="math display">\[
Y_{t+1}=e_{t+1} X_{t}
\]</span></p>
<p>modelini ele alalım. Böyle bir eşitlikte tüm <span class="math inline">\(X_{t}\)</span> değerleri birbirine eşit yani, <span class="math inline">\(X_{t}=X_{t-1}=X_{t-2} \ldots \ldots\)</span> ise, <span class="math inline">\(Y_{t}\)</span> serisi sabit varyansli olacaktır. Fakat <span class="math inline">\(X_{t}\)</span> değerleri eşit değil ise, <span class="math inline">\(Y_{t+1}\)</span> koşullu değişen varyansa sahip olacaktır.</p>
<p><span class="math display">\[
\operatorname{Var}\left(Y_{t+1} I X_{t}\right)=X_{t}^{2} \sigma^{2}
\]</span></p>
<p><span class="math inline">\(Y_{t+1}\)</span> ’in koşullu varyansinın büyüklüğü <span class="math inline">\(X_{t}\)</span> değerlerine bağlidır ve <span class="math inline">\(X_{t}\)</span> değerleri ne kadar büyük olursa <span class="math inline">\(Y_{t+1}\)</span> ’in koşullu varyansı da o kadar büyük olacaktır. <span class="math inline">\(X_{t}\)</span> değerleri pozitif özilintili (autocorrelation) ise, <span class="math inline">\(Y_{t}\)</span> ’nin koşullu varyansı da pozitif özilintili olacaktır.</p>
<section id="özbağlanımlı-koşullu-değişen-varyans-autoregressive-conditional-heteroscedasticity--arch-modelleri" class="level2">
<h2 class="anchored" data-anchor-id="özbağlanımlı-koşullu-değişen-varyans-autoregressive-conditional-heteroscedasticity--arch-modelleri">3.1. Özbağlanımlı Koşullu Değişen Varyans (Autoregressive Conditional Heteroscedasticity -ARCH) Modelleri</h2>
<p>Engle (1982) tarafından önerilen orijinal ARCH modeli, bir bağlanım modelinin hatalarının varyansını, kareli bağlanım hatalarının gecikmeli değerlerinin doğrusal bir fonksiyonu olarak modellemiştir. <span class="math inline">\(ARCH(m)\)</span> modelini şu şekilde yazabiliriz:</p>
<p><span class="math display">\[
\begin{array}{rlr}
y_{t} &amp; =\mathrm{x}_{t} \boldsymbol{\beta}+\epsilon_{t} &amp; \text { (koşullu ortalama) } \\
\sigma_{t}^{2} &amp; =\gamma_{0}+\gamma_{1} \epsilon_{t-1}^{2}+\gamma_{2} \epsilon_{t-2}^{2}+\cdots+\gamma_{m} \epsilon_{t-m}^{2} &amp; \text { (koşullu varyans) }
\end{array}
\]</span></p>
<p>burada,</p>
<ul>
<li><span class="math inline">\(\epsilon_{t}^{2}\)</span> karesel hatalar</li>
<li><span class="math inline">\(\gamma_{i}\)</span> ARCH parametresidir</li>
</ul>
<p><strong><em>Örnek: BİST 100 Günlük Getirileri için ARCH Modeli</em></strong></p>
<p>ARCH modeli için, <code>arch</code> çerçevesini kullanacağız:</p>
<div class="cell" data-execution_count="10">
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> arch <span class="im">import</span> arch_model</span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a><span class="co"># arch modeli</span></span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a>model <span class="op">=</span> arch_model(bist_günlük_getiriler, vol <span class="op">=</span> <span class="st">"ARCH"</span>, rescale <span class="op">=</span> <span class="st">"FALSE"</span>)</span>
<span id="cb13-5"><a href="#cb13-5" aria-hidden="true" tabindex="-1"></a>model_uygulama <span class="op">=</span> model.fit()</span>
<span id="cb13-6"><a href="#cb13-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-7"><a href="#cb13-7" aria-hidden="true" tabindex="-1"></a><span class="co"># model çıktısı</span></span>
<span id="cb13-8"><a href="#cb13-8" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(model_uygulama.summary())</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Iteration:      1,   Func. Count:      5,   Neg. LLF: 3571290180.478702
Iteration:      2,   Func. Count:     17,   Neg. LLF: -8764.411021591446
Iteration:      3,   Func. Count:     25,   Neg. LLF: -11087.415778795152
Iteration:      4,   Func. Count:     31,   Neg. LLF: -9139.599896195536
Iteration:      5,   Func. Count:     39,   Neg. LLF: -11177.647965304683
Iteration:      6,   Func. Count:     43,   Neg. LLF: -11177.64796731694
Iteration:      7,   Func. Count:     46,   Neg. LLF: -11177.647967316942
Optimization terminated successfully    (Exit mode 0)
            Current function value: -11177.64796731694
            Iterations: 7
            Function evaluations: 46
            Gradient evaluations: 7
                      Constant Mean - ARCH Model Results                      
==============================================================================
Dep. Variable:              getiriler   R-squared:                       0.000
Mean Model:             Constant Mean   Adj. R-squared:                  0.000
Vol Model:                       ARCH   Log-Likelihood:                11177.6
Distribution:                  Normal   AIC:                          -22349.3
Method:            Maximum Likelihood   BIC:                          -22330.3
                                        No. Observations:                 4116
Date:                Sat, Jan 29 2022   Df Residuals:                     4115
Time:                        10:20:12   Df Model:                            1
                                 Mean Model                                 
============================================================================
                 coef    std err          t      P&gt;|t|      95.0% Conf. Int.
----------------------------------------------------------------------------
mu         8.2816e-04  2.560e-04      3.235  1.218e-03 [3.263e-04,1.330e-03]
                              Volatility Model                              
============================================================================
                 coef    std err          t      P&gt;|t|      95.0% Conf. Int.
----------------------------------------------------------------------------
omega      2.2218e-04  9.553e-06     23.257 1.220e-119 [2.035e-04,2.409e-04]
alpha[1]       0.1645  3.530e-02      4.661  3.141e-06   [9.535e-02,  0.234]
============================================================================

Covariance estimator: robust</code></pre>
</div>
</div>
</section>
<section id="genelleştirilmiş-özbağlanımlı-koşullu-değişen-varyans-generalized-autoregressive-conditional-heteroscedasticity---garch-modelleri" class="level2">
<h2 class="anchored" data-anchor-id="genelleştirilmiş-özbağlanımlı-koşullu-değişen-varyans-generalized-autoregressive-conditional-heteroscedasticity---garch-modelleri">3.2. Genelleştirilmiş Özbağlanımlı Koşullu Değişen Varyans (Generalized Autoregressive Conditional Heteroscedasticity - GARCH) Modelleri</h2>
<p>ARCH modeli, hem koşullu ortalama hem de koşullu varyans için bir spesifikasyona sahiptir ve varyans, önceden beklenmeyen yeniliklerin boyutunun bir fonksiyonudur - <span class="math inline">\(\epsilon_{t}^{2}\)</span>. Bu model, bir GARCH modeli olan koşullu varyansın gecikmeli değerlerini içerecek şekilde Bollerslev (1986) tarafından genelleştirildi. <span class="math inline">\(GARCH(m; k)\)</span> modeli şu şekilde yazılabilir:</p>
<p><span class="math display">\[
\begin{aligned}
y_{t} &amp;=\mathrm{x}_{t} \boldsymbol{\beta}+\epsilon_{t} \\
\sigma_{t}^{2} &amp;=\gamma_{0}+\gamma_{1} \epsilon_{t-1}^{2}+\gamma_{2} \epsilon_{t-2}^{2}+\cdots+\gamma_{m} \epsilon_{t-m}^{2}+\delta_{1} \sigma_{t-1}^{2}+\delta_{2} \sigma_{t-2}^{2}+\cdots+\delta_{k} \sigma_{t-k}^{2}
\end{aligned}
\]</span></p>
<p>burada,</p>
<ul>
<li><span class="math inline">\(\gamma_{i}\)</span> ARCH parametreleridir.</li>
<li><span class="math inline">\(\delta_{i}\)</span> GARCH parametreleridir.</li>
</ul>
<p>Engle (1982) öncü çalışmasında hata teriminin, <span class="math inline">\(t\)</span>’nin bir Gaussyen (normal) dağılım izlediğini varsaymıştır: <span class="math inline">\(\epsilon_{t} \sim N\left(0, \sigma_{t}^{2}\right)\)</span>. Bununla birlikte, Mandelbrot (1963) ve diğerlerinin belirttiği gibi, getirilerin dağılımı leptokurtik görünmektedir, yani aşırı getiriler, getiriler normal dağılmış olsaydı beklenenden daha sık görülür. Bu nedenle normal dağılımdan daha kalın kuyruklara sahip olabilecek, t-dağılımı gibi diğer dağılımları varsayılabilir.</p>
<p><strong><em>Örnek: BİST 100 Günlük Getirileri için GARCH Modeli</em></strong></p>
<p>BİST 100 günlük getirileri için GARCH modelini oluşturalım:</p>
<div class="cell" data-execution_count="11">
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> arch.univariate <span class="im">import</span> arch_model</span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a>model <span class="op">=</span> arch_model(bist_günlük_getiriler)</span>
<span id="cb15-4"><a href="#cb15-4" aria-hidden="true" tabindex="-1"></a>model_uygulama <span class="op">=</span> model.fit()</span>
<span id="cb15-5"><a href="#cb15-5" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(model_uygulama.summary())</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Iteration:      1,   Func. Count:      6,   Neg. LLF: 9.269469729505241e+20
Iteration:      2,   Func. Count:     19,   Neg. LLF: 650457030071.6444
Iteration:      3,   Func. Count:     34,   Neg. LLF: 2503645.186052971
Iteration:      4,   Func. Count:     47,   Neg. LLF: 6.296270929381882e+16
Iteration:      5,   Func. Count:     59,   Neg. LLF: 954245006566.8329
Iteration:      6,   Func. Count:     73,   Neg. LLF: -11400.762323658557
Optimization terminated successfully    (Exit mode 0)
            Current function value: -11400.76233816758
            Iterations: 10
            Function evaluations: 73
            Gradient evaluations: 6
                     Constant Mean - GARCH Model Results                      
==============================================================================
Dep. Variable:              getiriler   R-squared:                       0.000
Mean Model:             Constant Mean   Adj. R-squared:                  0.000
Vol Model:                      GARCH   Log-Likelihood:                11400.8
Distribution:                  Normal   AIC:                          -22793.5
Method:            Maximum Likelihood   BIC:                          -22768.2
                                        No. Observations:                 4116
Date:                Sat, Jan 29 2022   Df Residuals:                     4115
Time:                        10:20:15   Df Model:                            1
                                 Mean Model                                 
============================================================================
                 coef    std err          t      P&gt;|t|      95.0% Conf. Int.
----------------------------------------------------------------------------
mu         9.9178e-04  2.085e-04      4.757  1.969e-06 [5.831e-04,1.400e-03]
                              Volatility Model                              
============================================================================
                 coef    std err          t      P&gt;|t|      95.0% Conf. Int.
----------------------------------------------------------------------------
omega      5.2675e-06  5.320e-12  9.902e+05      0.000 [5.268e-06,5.268e-06]
alpha[1]       0.0500  7.230e-04     69.160      0.000 [4.858e-02,5.142e-02]
beta[1]        0.9300  2.645e-03    351.599      0.000     [  0.925,  0.935]
============================================================================

Covariance estimator: robust</code></pre>
</div>
</div>
</section>
<section id="glosten-jagannathan-runkle-garch-model-gjr-garch" class="level2">
<h2 class="anchored" data-anchor-id="glosten-jagannathan-runkle-garch-model-gjr-garch">3.3. Glosten-Jagannathan-Runkle GARCH Model (GJR-GARCH)</h2>
<p>GARCH modeline bir dönem gecikmeli bir asimetrik şok faktörü eklendiğinde GJR-GARCH biçimine dönüştürülebilir:</p>
<p><span class="math display">\[
\sigma_{t}^{2}=\omega+\alpha \epsilon_{t-1}^{2}+\gamma \epsilon_{t-1}^{2} I_{\left[\epsilon_{t-1}&lt;0\right]}+\beta \sigma_{t-1}^{2}
\]</span></p>
<p>burada <span class="math inline">\(I\)</span> argümanı doğru olduğunda 1 değerini alan bir gösterge işlevidir.</p>
<p>Log olabilirlik, asimetrik bir terimin eklenmesiyle önemli ölçüde iyileşir ve parametre tahmini oldukça anlamlı olur.</p>
<p><strong><em>Örnek: BİST 100 Günlük Getirileri için GJR-GARCH Modeli</em></strong></p>
<p>BİST 100 getirileri için GJR-GARCH modelini oluşturalım. Bunun için <code>o</code> parametresini 1 olarak ayarlayacağız:</p>
<div class="cell" data-execution_count="12">
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a>model <span class="op">=</span> arch_model(bist_günlük_getiriler, p<span class="op">=</span><span class="dv">1</span>, o<span class="op">=</span><span class="dv">1</span>, q<span class="op">=</span><span class="dv">1</span>)</span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a>model_uygulama <span class="op">=</span> model.fit(update_freq<span class="op">=</span><span class="dv">5</span>, disp<span class="op">=</span><span class="st">"off"</span>)</span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(model_uygulama.summary())</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>                   Constant Mean - GJR-GARCH Model Results                    
==============================================================================
Dep. Variable:              getiriler   R-squared:                       0.000
Mean Model:             Constant Mean   Adj. R-squared:                  0.000
Vol Model:                  GJR-GARCH   Log-Likelihood:                11443.7
Distribution:                  Normal   AIC:                          -22877.4
Method:            Maximum Likelihood   BIC:                          -22845.8
                                        No. Observations:                 4116
Date:                Sat, Jan 29 2022   Df Residuals:                     4115
Time:                        10:20:26   Df Model:                            1
                                 Mean Model                                 
============================================================================
                 coef    std err          t      P&gt;|t|      95.0% Conf. Int.
----------------------------------------------------------------------------
mu         8.1606e-04  2.239e-04      3.645  2.670e-04 [3.773e-04,1.255e-03]
                              Volatility Model                              
============================================================================
                 coef    std err          t      P&gt;|t|      95.0% Conf. Int.
----------------------------------------------------------------------------
omega      2.6337e-05  5.249e-07     50.171      0.000 [2.531e-05,2.737e-05]
alpha[1]       0.0500  1.470e-02      3.401  6.712e-04 [2.119e-02,7.881e-02]
gamma[1]       0.2000  3.602e-02      5.552  2.828e-08     [  0.129,  0.271]
beta[1]        0.7500  1.491e-02     50.292      0.000     [  0.721,  0.779]
============================================================================

Covariance estimator: robust</code></pre>
</div>
</div>
</section>
<section id="eşik-arch-threshold-arch-tarch-modeli" class="level2">
<h2 class="anchored" data-anchor-id="eşik-arch-threshold-arch-tarch-modeli">3.4. Eşik ARCH (Threshold ARCH-TARCH) Modeli</h2>
<p>TARCH modeli, oynaklığı (volatility) mutlak değerler kullnarak modeller. TARCH modelinde oynaklık süreci:</p>
<p><span class="math display">\[
\sigma_{t}=\omega+\alpha\left|\epsilon_{t-1}\right|+\gamma\left|\epsilon_{t-1}\right| I_{\left[\epsilon_{t-1}&lt;0\right]}+\beta \sigma_{t-1}
\]</span></p>
<p>Daha genel olarak, başka <span class="math inline">\(K\)</span> kuvvetleri için:</p>
<p><span class="math display">\[
\sigma_{t}^{\kappa}=\omega+\alpha\left|\epsilon_{t-1}\right|^{\kappa}+\gamma\left|\epsilon_{t-1}\right|^{\kappa} I_{\left[\epsilon_{t-1}&lt;0\right]}+\beta \sigma_{t-1}^{\kappa}
\]</span></p>
<p>burada koşullu varyans <span class="math inline">\(\left(\sigma_{t}^{\kappa}\right)^{2 / \kappa}\)</span> ile gösterilir.</p>
<p><strong><em>Örnek: BİST 100 Günlük Getirileri için TARCH Modeli</em></strong></p>
<p>BİST 100 getirileri için TARCH modelini oluşturalım. Bunun için <code>power</code> parametresini <code>1.0</code> olarak ayarlayacağız:</p>
<div class="cell" data-execution_count="13">
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a>model <span class="op">=</span> arch_model(bist_günlük_getiriler, p<span class="op">=</span><span class="dv">1</span>, o<span class="op">=</span><span class="dv">1</span>, q<span class="op">=</span><span class="dv">1</span>, power<span class="op">=</span><span class="fl">1.0</span>)</span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a>model_uygulama <span class="op">=</span> model.fit(update_freq<span class="op">=</span><span class="dv">5</span>, disp<span class="op">=</span><span class="st">"off"</span>)</span>
<span id="cb19-3"><a href="#cb19-3" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(model_uygulama.summary())</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>                  Constant Mean - TARCH/ZARCH Model Results                   
==============================================================================
Dep. Variable:              getiriler   R-squared:                       0.000
Mean Model:             Constant Mean   Adj. R-squared:                  0.000
Vol Model:                TARCH/ZARCH   Log-Likelihood:                11462.4
Distribution:                  Normal   AIC:                          -22914.8
Method:            Maximum Likelihood   BIC:                          -22883.2
                                        No. Observations:                 4116
Date:                Sat, Jan 29 2022   Df Residuals:                     4115
Time:                        10:20:29   Df Model:                            1
                                 Mean Model                                 
============================================================================
                 coef    std err          t      P&gt;|t|      95.0% Conf. Int.
----------------------------------------------------------------------------
mu         8.0746e-04  2.016e-04      4.005  6.198e-05 [4.123e-04,1.203e-03]
                              Volatility Model                              
============================================================================
                 coef    std err          t      P&gt;|t|      95.0% Conf. Int.
----------------------------------------------------------------------------
omega      8.7200e-04  2.623e-04      3.324  8.868e-04 [3.579e-04,1.386e-03]
alpha[1]       0.0383  1.072e-02      3.570  3.572e-04 [1.725e-02,5.927e-02]
gamma[1]       0.1080  2.506e-02      4.309  1.642e-05   [5.885e-02,  0.157]
beta[1]        0.8726  2.629e-02     33.196 1.225e-241     [  0.821,  0.924]
============================================================================

Covariance estimator: robust</code></pre>
</div>
</div>
</section>
<section id="üstel-garch-exponential-garch-egarch-modeli" class="level2">
<h2 class="anchored" data-anchor-id="üstel-garch-exponential-garch-egarch-modeli">3.5. Üstel GARCH (Exponential GARCH-EGARCH) Modeli</h2>
<p>EGARCH modelinde, koşullu varyans maruz kalınan şokun sadece büyüklüğüne değil, aynı zamanda işaretine bağlı olarak değişebilmektedir. Modelin oynaklık süreci:</p>
<p><span class="math display">\[
\ln \sigma_{t}^{2}=\omega+\sum_{i=1}^{p} \alpha_{i}\left(\left|e_{t-i}\right|-\sqrt{2 / \pi}\right)+\sum_{j=1}^{o} \gamma_{j} e_{t-j}+\sum_{k=1}^{q} \beta_{k} \ln \sigma_{t-k}^{2}
\]</span></p>
<p>burada, <span class="math inline">\(e_{t}=\epsilon_{t} / \sigma_{t}\)</span>.</p>
<p><strong><em>Örnek: BİST 100 Günlük Getirileri için EGARCH Modeli</em></strong></p>
<p>BİST 100 getirileri için EGARCH modelini oluşturalım. Bunun için <code>vol</code> parametresini <code>EGARCH</code> olarak ayarlayacağız:</p>
<div class="cell" data-execution_count="14">
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a>model <span class="op">=</span> arch_model(bist_günlük_getiriler, p<span class="op">=</span><span class="dv">1</span>, q<span class="op">=</span><span class="dv">1</span>, vol<span class="op">=</span><span class="st">'EGARCH'</span>)</span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a>model_uygulama <span class="op">=</span> model.fit(update_freq<span class="op">=</span><span class="dv">5</span>, disp<span class="op">=</span><span class="st">"off"</span>)</span>
<span id="cb21-3"><a href="#cb21-3" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(model_uygulama.summary())</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>                     Constant Mean - EGARCH Model Results                     
==============================================================================
Dep. Variable:              getiriler   R-squared:                       0.000
Mean Model:             Constant Mean   Adj. R-squared:                  0.000
Vol Model:                     EGARCH   Log-Likelihood:                11409.6
Distribution:                  Normal   AIC:                          -22811.2
Method:            Maximum Likelihood   BIC:                          -22785.9
                                        No. Observations:                 4116
Date:                Sat, Jan 29 2022   Df Residuals:                     4115
Time:                        10:20:32   Df Model:                            1
                                 Mean Model                                 
============================================================================
                 coef    std err          t      P&gt;|t|      95.0% Conf. Int.
----------------------------------------------------------------------------
mu         1.2417e-03  2.160e-04      5.748  9.033e-09 [8.183e-04,1.665e-03]
                            Volatility Model                            
========================================================================
                 coef    std err          t      P&gt;|t|  95.0% Conf. Int.
------------------------------------------------------------------------
omega         -0.3207  9.134e-02     -3.511  4.467e-04 [ -0.500, -0.142]
alpha[1]       0.1944  2.991e-02      6.501  7.992e-11 [  0.136,  0.253]
beta[1]        0.9607  1.111e-02     86.480      0.000 [  0.939,  0.982]
========================================================================

Covariance estimator: robust</code></pre>
</div>
</div>
</section>
<section id="student-t-hataları" class="level2">
<h2 class="anchored" data-anchor-id="student-t-hataları">3.6. Student-t Hataları</h2>
<p>Finansal getiriler genellikle kalın kuyruklu bir dağılım gösterir ve Student’s t dağılımı bu özelliği yakalamak için basit bir yöntemdir.</p>
<p><strong><em>Örnek: BİST 100 Günlük Getirileri için T Dağılımlı GARCH Modeli</em></strong></p>
<p>BİST 100 getirileri için t dağılımlı GARCH modelini oluşturalım. Bunun için <code>dist</code> parametresini <code>StudentsT</code> olarak ayarlayacağız:</p>
<div class="cell" data-execution_count="15">
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a>model <span class="op">=</span> arch_model(bist_günlük_getiriler, dist<span class="op">=</span><span class="st">"StudentsT"</span>)</span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a>model_uygulama <span class="op">=</span> model.fit(update_freq<span class="op">=</span><span class="dv">5</span>, disp<span class="op">=</span><span class="st">"off"</span>)</span>
<span id="cb23-3"><a href="#cb23-3" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(model_uygulama.summary())</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>                        Constant Mean - GARCH Model Results                         
====================================================================================
Dep. Variable:                    getiriler   R-squared:                       0.000
Mean Model:                   Constant Mean   Adj. R-squared:                  0.000
Vol Model:                            GARCH   Log-Likelihood:               -6107.66
Distribution:      Standardized Student's t   AIC:                           12225.3
Method:                  Maximum Likelihood   BIC:                           12256.9
                                              No. Observations:                 4116
Date:                      Sat, Jan 29 2022   Df Residuals:                     4115
Time:                              10:20:34   Df Model:                            1
                                   Mean Model                                  
===============================================================================
                  coef    std err          t      P&gt;|t|        95.0% Conf. Int.
-------------------------------------------------------------------------------
mu         -1.7357e-03  2.069e-04     -8.388  4.943e-17 [-2.141e-03,-1.330e-03]
                               Volatility Model                              
=============================================================================
                 coef    std err          t      P&gt;|t|       95.0% Conf. Int.
-----------------------------------------------------------------------------
omega      2.6279e-03  1.075e-06   2445.093      0.000  [2.626e-03,2.630e-03]
alpha[1]   3.6917e-08  3.083e-03  1.198e-05      1.000 [-6.042e-03,6.042e-03]
beta[1]        1.0000  1.981e-05  5.049e+04      0.000      [  1.000,  1.000]
                              Distribution                              
========================================================================
                 coef    std err          t      P&gt;|t|  95.0% Conf. Int.
------------------------------------------------------------------------
nu             7.2749  2.832e-04  2.569e+04      0.000 [  7.274,  7.275]
========================================================================

Covariance estimator: robust</code></pre>
</div>
</div>


</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



</body></html>