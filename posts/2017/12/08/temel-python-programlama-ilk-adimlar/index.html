<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.450">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Kaan Öztürk">
<meta name="dcterms.date" content="2017-12-08">

<title>Veri Defteri - Python Programlamaya Giriş 1 - İlk adımlar</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="../../../../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../../../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../../../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../../../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../../../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../../../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../../../../">
<link href="../../../../../img/veridefteri_ikon.png" rel="icon" type="image/png">
<script src="../../../../../site_libs/quarto-html/quarto.js"></script>
<script src="../../../../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../../../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../../../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../../../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../../../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../../../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../../../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../../../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>

  <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<link rel="stylesheet" href="../../../../../styles.css">
</head>

<body class="nav-fixed fullcontent">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a class="navbar-brand" href="../../../../../index.html">
    <span class="navbar-title">Veri Defteri</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../../../../about.html" rel="" target="">
 <span class="menu-text">Hakkımızda</span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://twitter.com/veridefteri" rel="" target=""><i class="bi bi-twitter" role="img">
</i> 
 <span class="menu-text"></span></a>
  </li>  
</ul>
            <div class="quarto-navbar-tools">
</div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Python Programlamaya Giriş 1 - İlk adımlar</h1>
  <div class="quarto-categories">
    <div class="quarto-category">Python Programlamaya Giriş</div>
  </div>
  </div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Kaan Öztürk </p>
          </div>
  </div>
    
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">December 8, 2017</p>
    </div>
  </div>
  
    
  </div>
  

</header>

<p><em>Bu yazıyla, yeni başlayanlara Python programlama dilini öğreten bir yazı dizisine başlıyoruz. İlk yazımızda Python’u kurma, etkileşimli olarak çalıştırma, basit bir Python programı (betiği) hazırlama, ve bir Jupyter defteri kullanma konularını açıklayacağız.</em></p>
<p><em>Yirmiüç bölümlük bu dizide Python’da program akış kontrolü, fonksiyonlar, dizeler, listeler, sözlükler, dosya okuma/yazma, hata yakalama, modüller, ve nesneye yönelik programlama konularını işleyeceğiz. Anlatımı çok temel bir seviyede tutacağımız için başka bir programlama dili bilmeniz gerekli değil. Nitekim Python, sözdiziminin sadeliği sebebiyle, programlamayı yeni öğrenenler için en uygun dillerden biri.</em></p>
<section id="kurulum" class="level2">
<h2 class="anchored" data-anchor-id="kurulum">Kurulum</h2>
<p>Python programlarını yazmak için gereken şeyler çok az: Sadece bir metin editörüne (text editor) ve Python yorumlayıcısına ihtiyacınız var. Metin editörü ile programı yazarsınız, ve yorumlayıcıya bu dosyayı okuyup çalıştırmasını söylersiniz. Hepsi bu.</p>
<p>Metin editörü olarak notepad, emacs, gedit gibi programlar kullanılabilir. Ancak Word, LibreOffice Writer gibi kelime işlemcileri kullanamazsınız. Bunlar yazıları kendilerine özgü bir biçimde saklarlar ve Python yorumlayıcısı bu dosyaları okuyamaz.</p>
<p>Python yorumlayıcısını <a href="https://www.python.org/">Python resmi sayfasından</a> indirip kolayca kurabilirsiniz. Her platformda (Windows, MacOS, Unix, Linux,…) çalışabilen bir Python derleyicisi vardır. Bir makinede yazdığınız bir Python programını, gerekli yorumlayıcının mevcut olduğu başka bir makinede, farklı bir işletim sistemi kullansa bile, çalıştırabilirsiniz.</p>
<p>Python yorumlayıcısı sisteminizde mevcut bile olabilir. Linux kullanıyorsanız zaten kuruludur çünkü birçok sistem programı Python kullanır. Ubuntu, Fedora vs gibi paket yönetim sistemi olan bir dağıtım kullanıyorsanız, paket yöneticisi aracılığıyla kurmanız daha iyi olabilir.</p>
<p>Bir editör ve yorumlayıcı, program yazmanız ve çalıştırmanız için yeterlidir. Gerisi teferruattır, ve başlangıç için şart değildir. Ama Python bazı geliştirme araçları size hız ve kolaylık sağlar. Söz gelişi IDLE, Spyder, PyCharm gibi bir IDE (bütünleşik geliştirme ortamı) kullanmayı tercih edebilirsiniz. Bunlardan daha sonra bahsedeceğiz.</p>
<p>Python kurmak için başka bir yol da <a href="https://www.anaconda.com/download/">Anaconda</a> veya <a href="https://www.enthought.com/product/canopy/">Canopy</a> gibi Python dağıtımları. Bunların en büyük avantajı, ileri seviye kullanıcıların ihtiyaç duyduğu modüllerin, sürümleri birbiriyle uyumlu olacak şekilde seçilerek bir araya getirilmiş olmaları. Spyder, Jupyter Notebook gibi yazılımlar da bu dağıtımlarla geliyor. Tabii bu modülleri ayrı ayrı da kurabilirsiniz, mutlaka bu dağıtımlara bağlı olmaya ihtiyacınız yok.</p>
</section>
<section id="python-2.7-mi-3.x-mi" class="level2">
<h2 class="anchored" data-anchor-id="python-2.7-mi-3.x-mi">Python 2.7 mi 3.x mi?</h2>
<p>Kurulumda kullanacağınız paketi seçerken ilk karşınıza çıkacak soru Python 2.7 ile Python 3.6 (veya bu yazıyı okuduğunuz tarihe göre, 3.7, 3.8, vs.) arasında seçim yapmaktır.</p>
<p>Kısa cevap: En son sürümü seçin. Python’u yeni öğreniyorsanız Python 2.7’ye bakmayın bile.</p>
<p>Python 1990’dan 2000’e kadar yavaş yavaş gelişti. 2000’de Python 2.0 çıktı, ve ardından kullanımı yavaş yavaş yaygınlaştı. Bir süre sonra, tasarımındaki bazı eksikliklerin geriye doğru uyumlu kalarak düzeltilemeyeceği farkedildi. 2008 yılında Python 2.6 ile beraber, eskisiyle tamamen uyumlu olmayan Python 3.0 ilan edildi. Bundan sonra bir süre Python’un gelişimi iki daldan devam etti. 2009 yılında Python 2.7 ve Python 3.1 çıktı. Python 3 dalındaki bazı iyileştirmeler, uyumlu oldukları ölçüde, 2.7 dalına da aktarıldı. Ancak Python 2 dalının 2.7’de sonlandırılmasına karar verildi. Python Vakfı 2.7 sürümünü 2020’ye kadar destekleyeceğini, bu arada herkesin Python 3’e geçmesi gerektiğini ilan etti.</p>
<p>Yakın zamana kadar bazı önemli modüller sadece Python 2.7 ile çalıştığı için, birkaç yıl önce Python 2 ile Python 3 arasında karar vermek için biraz düşünmek gerekirdi. Artık öyle bir mesele yok. Basitçe, Python 2.7 geçmişte kaldı. Modern Python sadece 3.x ve üstü sürümlerdir.</p>
<p>Elinizde geçmişten kalma bazı Python 2.7 betikleri varsa, bunları Python’la beraber gelen <a href="https://docs.python.org/3/library/2to3.html">2to3 aracıyla</a> Python 3.x sürümlerine uyumlu hale getirebilirsiniz.</p>
</section>
<section id="basit-etkileşimli-kullanım" class="level2">
<h2 class="anchored" data-anchor-id="basit-etkileşimli-kullanım">Basit etkileşimli kullanım</h2>
<p>Python’u işletim sisteminizin komut yorumlayıcısı ile (DOS command prompt veya shell/terminal) çalıştırıp etkileşimli olarak kullanabilirsiniz. Dolar ($) işareti komut yorumlayıcısının işareti. Aşağıdaki ekran görüntüsünde bazı örnekler görülüyor. <code>&gt;&gt;&gt;</code> işareti Python’un bir komut beklediğini gösteriyor. Komutu yazdıktan sonra işlenmesi için Enter tuşuna basın.</p>
<p><img src="img/pygiris1.png"></p>
<p>Python etkileşimli halde çalışırken, bir ifadeyi yazıp Enter’a basmanız ifadenin değerinin ekrana yazılmasını sağlar. Meselâ “2+2” yazıp Enter’e bastığımızda “4” yazması sadece etkileşimli modda mümkün. Bir betiğin (programın) içinde “2+2” ifadesinin değeri hesaplanır, ama ekrana basılmaz. Betik içindeki bir ifadenin değerinin ekrana basılmasını istiyorsanız için <code>print()</code> fonksiyonunu kullanmalısınız.</p>
<p>Yorumlayıcıyı kapatmak için <code>quit()</code> yazabilir, ya da Ctrl-D (Linux) veya Ctrl-Z (Windows) tuşlarına basabilirsiniz.</p>
<p>Python’u sadece tek bir işlem için kullanacaksanız, etkileşimli oturum açmak yerine, komut satırında <code>-c</code> parametresi vererek de çalıştırabilirsiniz. Meselâ şöyle:</p>
<p><img src="img/pygiris2.png"></p>
</section>
<section id="program-çalıştırma" class="level2">
<h2 class="anchored" data-anchor-id="program-çalıştırma">Program çalıştırma</h2>
<p>Python programları, bir düz metin dosyasına yazılmış Python ifadelerinden ibarettir. Notepad, emacs, gedit gibi herhangi bir düz metin editörü açın ve aşağıdaki satırları yazın. Dosyayı <em>ortalama.py</em> ismiyle kaydedin.</p>
<pre><code>a = float(input("Bir sayı girin: "))
b = float(input("Bir sayı girin: "))
c = float(input("Bir sayı girin: "))
d = float(input("Bir sayı girin: "))

print("Ortalama:", (a+b+c+d)/4)</code></pre>
<p>Komut terminalini açıp dosyayı kaydettiğiniz dizine geçin ve <code>python ortalama.py</code> yazıp Enter’a basın. (Windows’ta dosya ikonuna tıklamak yeterli olacaktır). Program çalışınca ayrı ayrı dört reel sayı yazıp Enter’a basın.</p>
<p><img src="img/pygiris3.png"></p>
<p><code>a = float(input("Bir sayı girin: "))</code> satırında, <code>input()</code> fonksiyonu ekrana <code>Bir sayı girin:</code> yazısını çıkarır ve siz klavyeyle bir şey yazana kadar bekler. Sizden aldığı cevabı bir “dize”, yani yazı olarak geri verir. Bu dizeyi aritmetik işlemde kullanabilmek için önce sayısal değere çevirmemiz gerekir. <code>input()</code> çağrısının etrafına sarılı `float() fonksiyonu bu işi yapar.</p>
<p>Bunu adım adım şöyle düşünebilirsiniz:</p>
<pre><code>a = float(input("Bir sayı girin: "))
a = float("1.2")
a = 1.2</code></pre>
<p>Alternatif olarak, kodumuzu şöyle de yazabilirdik:</p>
<pre><code>a = input("Bir sayı girin: ")
a = float(a)
b = input("Bir sayı girin: ")
b = float(b)
c = input("Bir sayı girin: ")
c = float(c)
d = input("Bir sayı girin: ")
d = float(d)

print("Ortalama:", (a+b+c+d)/4)</code></pre>
</section>
<section id="bütünleşik-geliştirme-ortamları-ide" class="level2">
<h2 class="anchored" data-anchor-id="bütünleşik-geliştirme-ortamları-ide">Bütünleşik Geliştirme Ortamları (IDE)</h2>
<p>Programlama için her ne kadar bir metin editörü yetse de, bir IDE’nin sağladığı kolaylıklar yabana atılamaz. Sözgelişi kod parçalarını renklendirerek okunurluğu artırmak, yazılan komutu otomatik tamamlayabilmek, çevrimiçi yardım belgelerine erişebilmek, bir çok dosya içeren yazılım projelerini organize edebilmek, hata ayıklayıcı ile editörü birleştirmek gibi imkânlar sağlarlar.</p>
<h3 class="anchored">
IDLE
</h3>
<p>IDLE, Python’la birlikte gelen basit ve minimal bir IDE’dir. Çok fazla bir imkân sağlamasa da, hafifliği ve her yerde bulunabilirliği sebebiyle varlığının farkında olmakta fayda var.</p>
<p>IDLE’ı çalıştırdığınızda, önce Python yorumlayıcısını etkileşimli kullanabileceğiniz bir pencere çıkar. <em>File</em> menüsünden <em>New file</em> seçerek bir editör penceresi açılabilir, veya <em>Open…</em> seçerek editöre mevcut bir dosya yüklenebilir. Editördeki Python programı, F5 tuşuna basarak yorumlayıcı penceresinde çalıştırılabilir.</p>
<img src="img/pygiris4.png">
<h3 class="anchored">
Spyder
</h3>
<p>IDLE’yi kullandıkça bir çok amaç için yetersiz kaldığını göreceksiniz. Daha güçlü bir IDE olarak Spyder’ı tavsiye ederim. Spyder’da tek bir pencere içinde editör, komut penceresi, dizin ağacı, değişken listesi, ve çevrimiçi yardım bulunabilir.</p>
<p><img src="img/pygiris5.png"></p>
</section>
<section id="jupyter-notebook" class="level2">
<h2 class="anchored" data-anchor-id="jupyter-notebook">Jupyter Notebook</h2>
<p>Etkileşimli hesaplamada başka bir yaklaşım kodu “defter” denilen biçimde düzenlemektir. <em>Jupyter notebook</em> kullandığınızda komutlar “hücreler” ile organize edilir. Her hücre çalıştırıldığında, hücredeki komutlar defterin bağlı olduğu “çekirdeğe” (yorumlayıcıya) gönderilir, geri gelen cevaplar hücrenin altına yazılır. Bu şekilde bir dizi işlemin çıktısını kaydeden bir rapor hazırlamak mümkün olur. Bir Jupyter defterinde yazı, kod, şekil, formül, HTML elemanları bir arada bulunabilir.</p>
<p>Bu yazı ve birçok başka yazımız Jupyter defteri olarak hazırlandı, <code>nbconvert</code> aracıyla HTML’ye çevrilerek doğrudan blogumuza aktarıldı.</p>
<p>Bir Jupyter defteri HTML ve JavaScript teknolojileri ile hazırlanmıştır. Tarayıcınızda çalışır, ama kullanmak için internet bağlantısına ihtiyacınız olmaz.</p>
<p>Jupyter defterleriyle ilgili daha ayrıntılı bilgiyi diğer yazılarımızda bulabilirsiniz. Temel bir başlangıç için <a href="http://www.veridefteri.com/2017/10/30/jupyter-notebook-nedir-2/">Jupyter Notebook Nedir</a> yazımıza bakabilirsiniz.</p>
</section>
<section id="alıştırmalar" class="level2">
<h2 class="anchored" data-anchor-id="alıştırmalar">Alıştırmalar</h2>
<p>Python’a ısınmak için küçük işler yaparak işe başlayabilirsiniz.</p>
<ol type="1">
<li><p>Python yorumlayıcısını etkileşimli kullanarak aşağıdaki değerleri hesaplayın. <span class="math display">\[\frac{1}{2} + \frac{1}{4} + \frac{1}{8} + \frac{1}{16}\]</span> <span class="math display">\[(2.1^3 - 4.7^{-4.3}) / (2.5^{0.5} + 10^{0.25})\]</span> <span class="math display">\[x=1,2,3 \ \mathrm{için}\ x^3 - 3x^2 + 5x -1\]</span></p></li>
<li><p>Aritmetik ortalama alma programına ekleme yapın: Program girilen sayıların standart sapmasını, geometrik ortalamasını ve harmonik ortalamasını hesaplayıp ekrana yazsın. Karekök almak için <span class="math inline">\(\sqrt{x} = x^{0.5}\)</span> denkliğini kullanabilirsiniz.</p></li>
</ol>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



</body></html>